<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" >
<head th:insert="fragments/header.html::head('Product')"></head>
<body>
	<!-- Menu -->
	<div th:replace="fragments/menu.html::menu(currentRoute='/customer')"></div>
	
	<div style="margin-top: 130px;"></div>
	
	<div class="container" style="margin-bottom: 50px;">
		<a class="btn btn-primary">Add Customer</a>
	</div>
	
	<!-- product table -->
	<div class="container">
		<div class="mb-5" th:if="${param.success}">
			<span class="alert alert-success d-flex flex-row">商品登録が正常に完了いたしました。</span>
		</div>

		<div class="mb-5" th:if="${param.updated}">
			<span class="alert alert-warning d-flex flex-row">商品変更するのが正常に完了いたしました。</span>
		</div>

		<div class="mb-5" th:if="${param.deleted}">
			<span class="alert alert-danger d-flex flex-row">商品を削除しました。</span>
		</div>
		
		<table id="customerTable" class="table table-bordered table-striped">
			<thead class="thead-dark text-center text-white" style="background-color: rgb(132, 132, 132);">
			  <tr>
				<th scope="col">Customer ID</th>
				<th scope="col">Name</th>
				<th scope="col">Email</th>
				<th scope="col">Phone</th>
				<th scope="col">Point</th>
				<th scope="col">Address</th>
				<th scope="col">Action</th>
			  </tr>
			</thead>
			<tbody>
			  <tr th:each="customer:${customers}" th:object="${customer}">
				<th scope="row" style="text-align: right;padding-right: 15px;" th:text="*{customerId}"></th>
				<td>
					<div>
						<div th:text="*{firstName}"></div>
						<div th:text="*{lastName}"></div>
					</div>
				</td>
				<td th:text="*{mail}"></td>
				<td style="text-align: right;" th:text="*{phone}"></td>
				<td style="text-align: right;" th:text="*{point}"></td>
				<td style="text-align: right;" th:text="*{numOfAddress}"></td>
				<td class="text-center">
					<a th:href="@{'/customer/'+*{customerId}+'/address'}">addresses</a>
					<button 
						action="update" 
					>Edit</button>
					<button 
						action="delete" 
					>Delete</button>
				</td>
			  </tr>
			</tbody>
		  </table>
	</div>

  <!-- common function -->
  <script>
	var reload = (param)=>{
		if(!param){
			window.location.href = window.location.href;
			return;
		}

		if(window.location.href.includes("?")){
			window.location.href = window.location.href.split("?")[0] + `?${param}`;
		}else{
			window.location.href = window.location.href + `?${param}`;
		}
	}
	$(document).ready(function(){
		$('#customerTable').DataTable();
	})
  </script>
  <!-- product create -->
  <script>
	$(document).ready(function(){
		  
	})
  </script>
  
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
</html>